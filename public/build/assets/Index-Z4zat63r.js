import{e as j,f as $,h as S,Q as h,c as o,o as d,a as l,u as n,g as V,w as c,d as f,b as i,F as v,r as z,t as _,S as x,_ as C,i as y,j as B}from"./app-F8B5DUc8.js";import{_ as F}from"./PageHeading-BdhsYaIN.js";import{_ as L}from"./Card-D111JjpC.js";import{l as u}from"./lodash-TZocvuLE.js";import{r as O,_ as N,a as A,b as D}from"./Pagination-BQhaW_zd.js";import{_ as P}from"./InputText-CiFFRSDt.js";import{_ as E}from"./InputCheckbox-D8baZjQQ.js";import{r as Q}from"./UsersIcon-BH4rb9-v.js";import{r as U}from"./PlusIcon-DJ3CVRDP.js";const q={class:"flex flex-col-reverse items-stretch justify-between md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-3"},G={class:"flex flex-col w-full space-y-3 lg:w-2/3 md:space-y-0 md:flex-row md:items-center"},I={class:"flex-1 w-full md:max-w-xs md:mr-4"},J={class:"flex flex-wrap md:flex-nowrap gap-3"},M={key:0,class:"ml-0 md:ml-3 flex items-center"},R={key:0,class:"flex flex-col items-stretch justify-end flex-shrink-0 w-full pb-3 md:pb-0 md:w-auto md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-2"},T={key:0},W={role:"list",class:"divide-y divide-gray-200"},H=["onClick"],K={class:"ml-4 flex-shrink-0 text-gray-400"},X={key:1},Y={class:"text-center py-6"},Z={class:"flex mt-6 justify-center"},ce={__name:"Index",props:{users:Object,filters:Object,filterOptions:Array,sortOptions:Array},setup(m){const r=m,p=j(),s=$({search:r.filters.search,field:r.filters.field??"last_name",direction:r.filters.direction??"asc",places:r.filters.places??[],certificates:r.filters.certificates??[],roles:r.filters.roles??[],archived:r.filters.archived===!0||r.filters.archived==="true"}),g=({column:t,direction:e})=>{s.value.field=t,s.value.direction=e};function w(t){s.value.places=t.places||[],s.value.certificates=t.certificates||[],s.value.roles=t.roles||[]}function k(){s.value.search=null,s.value.places=[],s.value.certificates=[],s.value.roles=[],s.value.archived=!1}S(s,u.debounce(function(t){const e={...u.pickBy(t),places:t.places.length?t.places.join(","):void 0,certificates:t.certificates.length?t.certificates.join(","):void 0,roles:t.roles.length?t.roles.join(","):void 0};h.get(route("admin.user.index"),u.pickBy(e),{preserveState:!0,replace:!0,preserveScroll:!0})},200),{deep:!0});function b(t,e){confirm(`Weet je zeker dat je wilt inloggen als ${e}?`)&&h.post(route("admin.impersonate.login",t),{},{})}return(t,e)=>(d(),o(v,null,[l(n(V),{title:"Ledenbeheer"}),l(F,{title:"Ledenbeheer"},{default:c(()=>e[2]||(e[2]=[f(" Beheer hier alle leden van Duikclub Nemo. Je kunt ledengegevens inzien, aanpassen, nieuwe leden toevoegen of archiveren. ")])),_:1,__:[2]}),l(L,null,{header:c(()=>[i("div",q,[i("div",G,[i("div",I,[l(P,{type:"search",class:"block w-full",modelValue:s.value.search,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.search=a),placeholder:"Lid zoeken..."},null,8,["modelValue"])]),i("div",J,[l(A,{class:"flex-1 md:flex-none",columns:r.sortOptions,sortColumn:s.value.field,sortDirection:s.value.direction,onSort:g},null,8,["columns","sortColumn","sortDirection"]),l(D,{class:"flex-1 md:flex-none",filters:r.filterOptions,initialFilters:r.filters,searchFilters:!0,onFilter:w},null,8,["filters","initialFilters"])]),n(p).hasPermission("user.viewAny")?(d(),o("div",M,[l(E,{id:"former",checked:s.value.archived,"onUpdate:checked":e[1]||(e[1]=a=>s.value.archived=a)},null,8,["checked"]),e[3]||(e[3]=i("label",{for:"former",class:"ml-2 text-sm text-gray-700 hover:text-gray-900"}," Verwijderde leden ",-1))])):y("",!0)]),n(p).hasPermission("user.create")?(d(),o("div",R,[l(n(x),{href:t.route("admin.user.create"),class:"w-full md:w-fit"},{default:c(()=>[l(B,{class:"w-full"},{default:c(()=>[l(n(U),{class:"size-5 mr-2","aria-hidden":"true"}),e[4]||(e[4]=f(" Lid toevoegen "))]),_:1,__:[4]})]),_:1},8,["href"])])):y("",!0)])]),default:c(()=>[r.users.data.length>0?(d(),o("div",T,[i("ul",W,[(d(!0),o(v,null,z(r.users.data,a=>(d(),o("li",{key:a.uuid,class:"group flex items-center justify-between py-2 hover:bg-gray-50 transition overflow-hidden"},[f(_(a)+" ",1),i("button",{onClick:ee=>b(a.id,a.fullname),class:"bg-blue-600 text-white text-sm px-3 py-1 rounded hover:bg-blue-700 transition"}," Login als "+_(a.fullname),9,H),i("div",K,[l(n(x),{href:t.route("admin.user.show",a.id)},{default:c(()=>[l(n(O),{class:"size-6"})]),_:2},1032,["href"])])]))),128))]),l(N,{meta:m.users.meta,stats:!0,only:["users"]},null,8,["meta"])])):(d(),o("div",X,[i("div",Y,[l(n(Q),{class:"mx-auto size-12 text-gray-500","aria-hidden":"true"}),e[6]||(e[6]=i("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"Geen leden gevonden",-1)),e[7]||(e[7]=i("p",{class:"mt-1 text-sm text-gray-500"},"Mogelijk is er een filter actief, of zijn er nog geen leden aangemaakt.",-1)),i("div",Z,[l(C,{type:"button",onClick:k},{default:c(()=>e[5]||(e[5]=[f(" Reset filters ")])),_:1,__:[5]})])])]))]),_:1})],64))}};export{ce as default};
